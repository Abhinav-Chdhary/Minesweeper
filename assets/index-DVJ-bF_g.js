(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function m(t,e,n){t.clearRect(0,0,canvas.width,canvas.height),t.rect(0,0,canvas.width,canvas.height);for(let l=0;l<n;l++)for(let i=0;i<n;i++)e[l][i].drawCell(t)}function S(t,e){const n=e.getBoundingClientRect(),l=t.clientX-n.left,i=t.clientY-n.top;return{x:l,y:i}}function B(t,e,n,l){const i=l/2,s=e+l/4,o=n+l/4,r=s,a=o+i,c=s+i,f=o+i/2;t.beginPath(),t.moveTo(s,o),t.lineTo(r,a),t.lineTo(c,f),t.closePath(),t.fillStyle="red",t.fill();const d=2,u=5*i/4;t.beginPath(),t.rect(s,o,d,u),t.fillStyle="black",t.fill();const h=d*4,L=d;t.beginPath(),t.rect(s-h/3,o+u,h,L),t.fillStyle="black",t.fill()}let M,w;const k=t=>{w=Date.now(),M=setInterval(()=>{const e=Math.floor((Date.now()-w)/1e3),n=Math.floor(e/60),l=e%60;t.innerHTML=`Time: ${n}:${l.toString().padStart(2,"0")}`},1e3)},T=t=>{M&&clearInterval(M),t.innerHTML="Time: 0:00"},P=document.getElementById("youWinScreen");function F(t,e,n){let l=0,i=0;for(let s=0;s<n;s++)for(let o=0;o<n;o++)e[s][o].isRevealed||++l,e[s][o].text==="M"&&++i;return l===i?(E(t,e,n),P.style.display="block",!0):!1}function E(t,e,n){for(let l=0;l<n;l++)for(let i=0;i<n;i++)e[l][i].isFlagged=!1,e[l][i].setReveal();m(t,e,n)}let O=[-1,0,1,0],N=[0,1,0,-1];const W=document.getElementById("timer"),H=document.getElementById("gameOverScreen"),j=()=>{H.style.display="block"};function X(t,e,n,l){let i=[{row:t,col:e}];const s=n[t][e].text;for(;i.length>0;){const o=i.shift();if(n[o.row][o.col].text===s)for(let r=0;r<4;r++){let a=o.row+O[r],c=o.col+N[r];if(a>=0&&c>=0&&a<l&&c<l&&!n[a][c].isRevealed){if(n[a][c].text==="M")continue;n[a][c].setReveal(),i.push({row:a,col:c})}}}}function Y(t,e,n,l){for(let i=0;i<l;i++)for(let s=0;s<l;s++)if(t[i][s].isCell(e.x,e.y)){if(t[i][s].isFlagged)break;if(t[i][s].text==="M"){E(n,t,l),j(),T(W);return}else t[i][s].setReveal(),X(i,s,t,l)}F(n,t,l)||m(n,t,l)}const R=document.getElementById("flagNumber"),b=t=>{R.innerHTML=`${t}`};function $(t,e,n,l){let i=parseInt(R.innerHTML);for(let s=0;s<l;s++)for(let o=0;o<l;o++)t[s][o].isCell(e.x,e.y)&&(t[s][o].isFlagged?(t[s][o].toggleFlagged(),b(i+1)):!t[s][o].isFlagged&&!t[s][o].isRevealed&&(b(i-1),t[s][o].toggleFlagged()));m(n,t,l)}let z=[-1,-1,0,1,1,1,0,-1],D=[0,1,1,1,0,-1,-1,-1];function C(t,e,n){for(let l=0;l<n;l++)for(let i=0;i<n;i++){if(e[l][i].text==="M")continue;let s=0;for(let o=0;o<8;o++){let r=l+z[o],a=i+D[o];r>=0&&a>=0&&r<n&&a<n&&e[r][a].text==="M"&&++s}s>0?e[l][i].setText(s.toString()):e[l][i].setText(" ")}m(t,e,n)}class A{constructor(e,n,l){this.x=e,this.y=n,this.side=l,this.text=" ",this.isRevealed=!1,this.isFlagged=!1}drawCell(e){e.fillStyle="white",this.isRevealed&&(e.fillStyle="#eed74b"),e.fillRect(this.x,this.y,this.side,this.side),this.isFlagged&&B(e,this.x,this.y,this.side),e.strokeStyle="black",e.lineWidth=2,e.strokeRect(this.x,this.y,this.side+1,this.side+1),this.isRevealed&&this.drawText(e)}drawText(e){if(this.text==="M"){this.drawMine(e);return}e.font="20px Comic Sans MS",e.textAlign="center",e.textBaseline="middle",this.text==="M"?e.fillStyle="black":this.text==="1"?e.fillStyle="blue":this.text==="2"?e.fillStyle="green":e.fillStyle="red";const n=this.x+this.side/2,l=this.y+this.side/2;e.fillText(this.text,n,l)}isCell(e,n){return e>=this.x&&e<=this.x+this.side&&n>=this.y&&n<=this.y+this.side}setReveal(){this.isRevealed=!0}setText(e){this.text=e}toggleFlagged(){this.isFlagged=!this.isFlagged}drawMine(e){const n=this.side/4,l=this.x+this.side/2,i=this.y+this.side/2;e.beginPath(),e.arc(l,i,n,0,2*Math.PI),e.fillStyle="black",e.fill();const s=n+3,o=2;e.strokeStyle="black",e.lineWidth=o,[0,Math.PI/3,2*Math.PI/3,Math.PI,4*Math.PI/3,5*Math.PI/3].forEach(a=>{e.beginPath(),e.moveTo(l,i),e.lineTo(l+s*Math.cos(a),i+s*Math.sin(a)),e.stroke()})}}function I(t){return Math.floor(Math.random()*t)}function G(t,e,n){for(;n>0;){let l=I(e),i=I(e);t[l][i].text!=="M"&&(t[l][i].setText("M"),--n)}}const q=(t,e,n,l,i,s,o)=>{let r=parseInt(n.value),a;l.value==="easy"?a=1/6:l.value==="med"?a=1/5:a=1/4;const c=50;t.width=r*c,t.height=r*c;let f=[];for(let u=0;u<r;u++){f[u]=[];for(let h=0;h<r;h++)f[u][h]=new A(c*u,c*h,c)}const d=Math.floor(r*r*a);return i.innerHTML=`${d}`,G(f,r,d),C(e,f,r),m(e,f,r),localStorage.setItem("gridSize",n.value),localStorage.setItem("difficultyLevel",l.value),o(s),{n:r,grid:f}},p=document.getElementById("flagNumber");function K(t,e,n,l){const i=x(t,e,l);i&&(p.innerHTML=`${parseInt(p.innerHTML)-1}`,J(t,i,n,l))}function x(t,e,n){for(let l=0;l<n;l++)for(let i=0;i<n;i++)if(t[l][i].isCell(e.x,e.y)&&t[l][i].text==="M")return{row:l,col:i};return null}function J(t,e,n,l){t[e.row][e.col].text=" ",C(n,t,l)}let g=[],y=10,v=!1;window.onload=function(){const t=document.getElementById("canvas"),e=t.getContext("2d"),n=document.getElementById("sizeOfGrid"),l=document.getElementById("difficulty"),i=document.getElementById("flagNumber"),s=document.getElementById("timer"),o=document.getElementById("gameOverScreen"),r=document.getElementById("youWinScreen"),a=document.getElementsByClassName("retryButton");n.value=localStorage.getItem("gridSize")||10,l.value=localStorage.getItem("difficultyLevel")||"easy";const c=()=>{const f=q(t,e,n,l,i,s,T);y=f.n,g=f.grid,v=!1,o.style.display="none",r.style.display="none"};n.addEventListener("change",c),l.addEventListener("change",c),a[0].addEventListener("click",c),a[1].addEventListener("click",c),c(),t.onclick=function(f){let d=S(f,t);v||(v=!0,k(s),K(g,d,e,y)),Y(g,d,e,y)},t.oncontextmenu=function(f){f.preventDefault();let d=S(f,t);$(g,d,e,y)}};
